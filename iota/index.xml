<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>IoTA on Stefan Michaelis - Blog</title>
    <link>https://blog.stefan-michaelis.name/iota/</link>
    <description>Recent content in IoTA on Stefan Michaelis - Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>de</language>
    <lastBuildDate>Wed, 25 Apr 2018 19:45:31 +0200</lastBuildDate>
    
        <atom:link href="https://blog.stefan-michaelis.name/iota/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Remote KDE Desktop mit KRFB</title>
      <link>https://blog.stefan-michaelis.name/iota/remote-kde-desktop-mit-krfb/</link>
      <pubDate>Wed, 25 Apr 2018 19:45:31 +0200</pubDate>
      
      <guid>https://blog.stefan-michaelis.name/iota/remote-kde-desktop-mit-krfb/</guid>
      <description>&lt;p&gt;Hin und wieder ist es nötig auf den Desktop eines entfernten, offen im
Internet zu erreichenden, Rechner zuzugreifen. Ein Standardmethode ist
dabei VNC, zu dem es eine Vielzahl an Implementierungen gibt. Soll der
normale, bereits laufende, KDE-Desktop frei gegeben werden kann dies
über die Anwendung &lt;code&gt;krfb&lt;/code&gt; anstelle einer eigenen, neuen VNC-Sitzung
erfolgen.&lt;/p&gt;

&lt;div class=&#34;row&#34;&gt;
     &lt;div class=&#34;col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1&#34;&gt;
     	  &lt;img src=&#34;https://blog.stefan-michaelis.name/images/krfb.png&#34; class=&#34;img-responsive&#34; /&gt;
     &lt;/div&gt;
&lt;/div&gt;


&lt;p&gt;Um den Zugriff, insbesondere den unbeaufsichtigten Zugriff,
abzusichern gibt es dazu ein paar einfache Möglichkeiten:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Sicheres Passwort wählen. Zufällig und lang.&lt;/li&gt;
&lt;li&gt;Standardport von 5900 auf einen anderen Port ändern. Diese Maßnahme
alleine bringt nur wenig Sicherheit, sondern hilft nur den Scan auf
offene VNC-Ports durch Standardskripte zu verhindern.&lt;/li&gt;
&lt;li&gt;Externen Zugriff auf den VNC-Port verhindern.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Letzteres erzwingt dann den Zugriff auf die Desktopfreigabe durch eine
sichere Umleitung wie einen ssh-Tunnel.&lt;/p&gt;

&lt;p&gt;Der Zugriff auf den Port kann per &lt;code&gt;iptables&lt;/code&gt; gesperrt werden:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;iptables -A INPUT -p tcp -i &amp;lt;eth0&amp;gt; --dport &amp;lt;5912&amp;gt; -j DROP
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Werte in spitzen Klammern müssen an das eigene System angepasst
werden, d.h. der Name des Netzwerkinterfaces und der Port unter dem
&lt;code&gt;krfb&lt;/code&gt; auf Anfragen horcht. Diese Regel ist nur bis zu einem Neustart
des Systems gültig.&lt;/p&gt;

&lt;p&gt;Ein ssh-Tunnel wird dann auf dem Rechner, von dem aus auf die Freigabe
zugegriffen werden soll, auf der Kommandozeile aufgebaut:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ssh -N -L 5900:&amp;lt;remotehost&amp;gt;:5912 &amp;lt;remotehost&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&amp;lt;remotehost&amp;gt;&lt;/code&gt; ist die IP-Adresse des entfernten Rechners. Der Zugriff
auf den Desktop, z.B. mit &lt;code&gt;krdc&lt;/code&gt; als Client erfolgt dann über die
Angabe von &lt;code&gt;localhost:5900&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Bei Nutzung mit den Standardeinstellungen von &lt;code&gt;krfb&lt;/code&gt; für das
Framebuffermodul zur Bilderstellung (xcb) und einem
Multimonitorbetrieb war dabei das Bild des entfernten Rechners
eingefroren. Abhilfe gebracht hat eine Umstellung auf &lt;code&gt;qt&lt;/code&gt; für das
Framebuffermodul.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Homeserver</title>
      <link>https://blog.stefan-michaelis.name/iota/homeserver1/</link>
      <pubDate>Wed, 04 Apr 2018 19:53:18 +0100</pubDate>
      
      <guid>https://blog.stefan-michaelis.name/iota/homeserver1/</guid>
      <description>&lt;p&gt;Das schöne an der Verkabelung mit KNX ist der dezentrale Ansatz und
die Eigenintelligenz der Komponenten. Fällt eine Komponente aus läuft
der Rest weiter. Je nach Komponente kann dies zwar unterschiedlich
fatal sein (bei der Heizungssteuerung fällt direkt eine ganze Etage
aus. Bei der Spannungsversorgung dann doch das gesamte System&amp;hellip;),
aber wie oft das vorkommt muss sich im Laufe der Jahre zeigen.&lt;/p&gt;

&lt;p&gt;Damit ist aber auch schon einmal sichergestellt, dass die
Grundfunktionen zuverlässig da sind. Nur so richtig &lt;em&gt;intelligent&lt;/em&gt; sind die
Komponenten dann wieder nicht. Also muss ein eigener Homeserver her,
der später als Spielwiese (hoffentlich) für die spannenden Experimente
dient.&lt;/p&gt;

&lt;p&gt;Im Wohnzimmer sind dazu an einer Stelle Stromanschluss, Ethernetkabel
und KNX-Leitung vorhanden. Hier wird der Server als zentrale
Steuereinheit auf Basis des bekannte Raspberry Pi später montiert werden.&lt;/p&gt;

&lt;img src=&#34;https://blog.stefan-michaelis.name/images/Homeserver_Gehaeuse_Vorderseite.jpg&#34; alt=&#34;Homeserver Vorderseite&#34; class=&#34;img-responsive&#34;&gt;

&lt;div class=&#34;caption&#34;&gt;Vorderseite des Homeserver-Gehäuses&lt;/div&gt;


&lt;p&gt;Das Gehäuse wird dazu aus einfachem Sperrholz gefertigt und bekommt
einen passenden Ausschnitt um das Touchdisplay zur Bedienung
aufzunehmen.&lt;/p&gt;

&lt;img src=&#34;https://blog.stefan-michaelis.name/images/Homeserver_Gehaeuse_Rueckseite.jpg&#34; alt=&#34;Homeserver Rückseite&#34; class=&#34;img-responsive&#34;&gt;

&lt;div class=&#34;caption&#34;&gt;Homeserver Rückseite&lt;/div&gt;


&lt;p&gt;In der Rückseitenansicht sind die Viertelrundhölzer in den Ecken zu
sehen die dem Gehäuse einen etwas &amp;ldquo;weicheren&amp;rdquo; Charme verleihen. Das
Ganze wird verleimt, ggf. verspachtelt und geschliffen, und
abschließend lackiert&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:1&#34;&gt;&lt;a rel=&#34;footnote&#34; href=&#34;#fn:1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;. Falls sich jemand wundert: Das Gehäuse ist
recht dick (knapp 6 cm) geworden und der Ausschnitt für das Display
asymmetrisch im Gehäuse. Optisch ließe sich durch eine kompaktere
Anordnung der Komponenten sicher eine flachere Bauweise erreichen, so
ist aber sichergestellt, dass alles später bequem in das Gehäuse
passt. Insbesondere das Netzteil verschwindet letztendlich im Bereich
rechts vom Display. Die Dicke erschließt sich beim Blick auf die gestackte
Anordnung aller Komponenten.&lt;/p&gt;

&lt;img src=&#34;https://blog.stefan-michaelis.name/images/Homeserver_Display_Rueckseite.jpg&#34; alt=&#34;Homeserver Display&#34; class=&#34;img-responsive&#34;&gt;

&lt;div class=&#34;caption&#34;&gt;Display mit Raspberry Pi und KNX-Ankopplung&lt;/div&gt;


&lt;p&gt;Die Hardware besteht aus:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.raspberrypi.org/documentation/hardware/raspberrypi/README.md&#34;&gt;Raspberry
Pi&lt;/a&gt;
(hier noch in der Version 2, die aktuelle Version 3 sollte aber
mindestens genauso gut/besser funktionieren), ca. 35 €&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.raspberrypi.org/documentation/hardware/display/README.md&#34;&gt;7-Zoll
Touchdisplay&lt;/a&gt;,
offizielles Display, ca. 70 €&lt;/li&gt;
&lt;li&gt;Micro-USB-Netzteil 2,5A, ca. 10 €&lt;/li&gt;
&lt;li&gt;Micro-SD-Karte 16 GB, ca. 10 €&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://busware.de/tiki-index.php?page=PIG_OW&#34;&gt;PIGATOR-HAT&lt;/a&gt; von
Busware, ca. 45 € inkl. Befestigungsset. Hierbei handelt es sich um
das Modul mit Echtzeituhr (RTC) und 1-Wire-Busanschluss. Für 10 € weniger
gibt es das auch als Aufsteckmodul ohne weitere Funktion. Eine RTC
ist hilfreich, ließe sich aber auch separat nachrüsten.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://shop.busware.de/product_info.php/cPath/1_32_33/products_id/105&#34;&gt;KNX-Pigator&lt;/a&gt;
für die Busanbindung, ca. 40 €.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Die letzten beiden Komponenten dienen für den Zugriff auf den KNX-Bus
und lassen sich über die passende Software auf dem Raspberry Pi auch
als Router zur Programmierung der Komponenten einsetzen. Schön an
dieser Lösung ist alle Komponenten passend zueinander und an einem
Platz zu haben.&lt;/p&gt;

&lt;p&gt;Da diese Komponenten alle rund um den Raspberry Pi herum entworfen
sind passen sie übereinander, ergeben aber auch einen entsprechend
dicken Aufbau. Die Stromversorgung wird am Display eingesteckt und
über die roten/schwarzen Kabel der Raspberry Pi von dort aus
betrieben.&lt;/p&gt;

&lt;p&gt;Alternativ kann auch ein professioneller Router für die
Elektroverteilung oder eine herkömmliche KNX-USB-Schnittstelle
eingesetzt werden, was die Programmierung des KNX-Busses auch ohne
verfügbaren Raspberry Pi ermöglicht.&lt;/p&gt;

&lt;p&gt;Statt der Kombination Raspberry Pi + Display ist auch eine Variante
mit Tablet denkbar, welches wiederum zur Steuerung auf eine
Weboberfläche auf dem Raspberry zugreift.&lt;/p&gt;

&lt;img src=&#34;https://blog.stefan-michaelis.name/images/Homeserver_Montiert.jpg&#34; alt=&#34;Homeserver montiert&#34; class=&#34;img-responsive&#34;&gt;

&lt;div class=&#34;caption&#34;&gt;Fertig an der Wand montierter Homeserver mit Raspbian-Linux&lt;/div&gt;


&lt;img src=&#34;https://blog.stefan-michaelis.name/images/Homeserver_MontiertTotale.jpg&#34; alt=&#34;/images/Homeserver_MontiertTotale.jpg&#34; class=&#34;img-responsive&#34;&gt;


&lt;p&gt;An der Wand montiert wirkt das gesamte Gehäuse allerdings bei weitem
nicht so dick und klobig wie noch während der Anfertigung. Als Basis
für die weitere Software dient ein herkömmliches Raspbian-Linux.&lt;/p&gt;

&lt;p&gt;Das Grundsystem als Plattform läuft damit, im nächsten Schritt geht es darum
den Zugriff auf den KNX-Bus zu ermöglichen und auch eine Steuerung zu
implementieren.&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;Notiz an mich: Lackieren ist gar nicht einfach und kein Selbstläufer. Tropfen, Nasen, Flecken, alles dabei. Für das nächste mal besser überlegen und testen wie das Ergebnis professioneller wird.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:1&#34;&gt; ↩&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Kalibrierung und Grundeinstellung</title>
      <link>https://blog.stefan-michaelis.name/iota/kalibrierung/</link>
      <pubDate>Wed, 28 Mar 2018 19:29:21 +0100</pubDate>
      
      <guid>https://blog.stefan-michaelis.name/iota/kalibrierung/</guid>
      <description>

&lt;p&gt;Alle Komponenten sind installiert, beschriftet und warten auf die
Inbetriebnahme. Das Schöne am KNX-Bus ist der dezentrale
Aufbau. Grundsätzlich bringen alle Komponenten ihre eigene rudimentäre
Intelligenz mit und funktionieren auch ohne zentrale
Steuereinheit. Insbesondere für Grundfunktionen wie Licht und Heizung
ist dies essenziell da diese somit nicht von der Funktion einer
zentralen Komponente abhängig sind. Für komplexere Regelungen, die
aber wieder den Alltag nur netter machen, ist der Homeserver dann das
nette Addon.&lt;/p&gt;

&lt;h2 id=&#34;raumtemperatur&#34;&gt;Raumtemperatur&lt;/h2&gt;

&lt;p&gt;Spätestens zum Winter muss die Heizung betriebsbereit sein. Zur
Überwachung der Raumtemperaturen sind verschiedene Sensoren verfügbar:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Über die &lt;a href=&#34;https://www.jung.de/1987/produkte/technik/knx-system/knx-tastsensoren-f-50/&#34;&gt;Jung Tastsensoren der Serie F50
Universal&lt;/a&gt;
steht in jedem Raum ein Sensor am Lichtschalter zur Verfügung&lt;/li&gt;
&lt;li&gt;Die Jung CO&lt;sub&gt;2&lt;/sub&gt;-Sensoren (Wohn- und Schlafzimmer) stellen ebenfalls die Temperatur
bereit&lt;/li&gt;
&lt;li&gt;In den Bädern sind kombiniert Feuchte-/Temperatursensoren der Elsner
vom Typ TH-UP verbaut&lt;/li&gt;
&lt;li&gt;Letztendlich noch ein einzelner Raumtemperatursensor MDT
SCN-TS1UP.01 im Keller
&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;hellip;und alle Sensoren zeigen (natürlich) etwas anderes an. Die
absolut korrekte Temperaturerfassung ist dabei gar nicht entscheidend,
sondern zur Einstellung der persönlichen Behaglichkeit müssen nur die
Level zwischen den Sensoren vergleichbar sein.&lt;/p&gt;

&lt;p&gt;Dementsprechend den Außenfühler der Wetterstation hereingeholt, neben
jedem einzelnen Sensor platziert und nach einiger Wartezeit den Wert
dieses Sensors mit den KNX-Sensoren verglichen.&lt;/p&gt;

&lt;p&gt;Am weitesten entfernt waren dabei die Jung-Sensoren (bis zu ~1,5 K),
gefolgt von den Elsner-Sensoren, während der MDT-Fühler identisch zur
(nicht zwangsweise richtigen) Temperatur der Wetterstation war.&lt;/p&gt;

&lt;p&gt;Auffällig war dabei aber, dass die gemessene Temperatur der Sensoren
in den Jung-Tastern vom Betriebsmodus abhängig war. Dies bieten ein
beleuchtetes Mittelfeld neben den eigentlichen Tastflächen. Und die
Wärmeentwicklung scheint die Sensoren deutlich zu beeinflussen. Das
lässt sich natürlich in den Einstellungen kompensieren, macht aber
andere Einstellungen wie einen dunkleren Nachtmodus oder die
Abschaltung am Tag nicht wirklich praktikabel.&lt;/p&gt;

&lt;p&gt;Die Elsner-Sensoren weisen im Handbuch darauf hin, dass es durch die
Wärmeentwicklung der Elektronik zur Beeinflussung der Messung kommt,
dies aber intern kompensiert wird, die Messwerte allerdings
dementsprechend erst nach einigen Minuten Laufzeit nach dem
Einschalten gültig sind.&lt;/p&gt;

&lt;p&gt;Hier müsste Jung noch einmal nachbessern. Die Unterschiede ließen sich
zwar extern kompensieren, was aber ziemlich aufwändig ist.&lt;/p&gt;

&lt;h2 id=&#34;rollläden&#34;&gt;Rollläden&lt;/h2&gt;

&lt;p&gt;Einmal installiert funktionieren die Rollläden auch direkt auf
Tastendruck. Um aber später nette Funktionen wie einen automatischen
Sonnenschutz (nach dem Winter kommt der Sommer) nutzen zu können ist
es hilfreich absolute Positionen anfahren zu können. Dazu müssen aber
die Auf- und Abfahrzeiten dem Aktor bekannt gegeben werden. Also
Stoppuhr herausgeholt und alle Rollläden einmal hoch und wieder
herunter gefahren. In der Praxis waren die Verfahrzeiten nur gut 50 %
der voreingestellten Zeiten, was auch Sinn ergibt, denn wer möchte
schon vorher, dass der Rollläden schon in der Mitte stoppt weil er
meint er wäre in der Endposition angekommen.&lt;/p&gt;

&lt;p&gt;In der Anleitung des MDT-Aktors steht dabei noch die Randbemerkung:
&amp;ldquo;Bei nicht so hochwertigen Motoren können sich die Auf- und
Abfahrzeiten unterscheiden&amp;rdquo;. Bei uns liegt die Differenz bei immerhin
2s. Dankeschön.&lt;/p&gt;

&lt;h2 id=&#34;dimmer&#34;&gt;Dimmer&lt;/h2&gt;

&lt;p&gt;Bei den Dimmern (zentrale Dimmer in klassischer
Phasenan-/abschnittstechnik) gibt (sollte) es nicht viel
einzustellen. Der Lasttyp gehört zumindest dazu.  Auffällig war aber
immerhin auch bei den von uns installierten Lampen, dass ein Wechsel
der Kennlinie vom Standard notwendig war. Erst die &amp;ldquo;Logarithmische
Kennlinie&amp;rdquo; hat ein zufriedenstellendes optisch scheinbares lineares
Dimmverhalten ergeben.&lt;/p&gt;

&lt;p&gt;Die Grundeinstellung für den Einschaltwert liegt dabei noch im Bereich
90 %-70 %. Nur so ist den heutigen LED-Flutlichtern (Warum müssen die
immer so hell sein? Weil&amp;rsquo;s geht?) auf ein angenehmes Maß beizukommen.&lt;/p&gt;

&lt;h2 id=&#34;schaltschwelle-präsenzmelder&#34;&gt;Schaltschwelle Präsenzmelder&lt;/h2&gt;

&lt;p&gt;Letztendlich muss auch die Einschaltschwelle für die Präsenzmelder,
die üblicherweise in den Fluren als Durchgangsbereichen installiert
sind, eingestellt werden. Letztendlich ist es hier Geschmackssache ab
wann dunkel zu dunkel ist. Sollten die Einstellbereiche nicht
ausreichend lässt sich noch weiterhin über den Reflexionsfaktor der
Umgebung eine weitere Abstimmungsmöglichkeit konfigurieren (MDT
Präsenzmelder).&lt;/p&gt;

&lt;p&gt;Sind alle diese Grundeinstellungen erfolgt steht der weiteren
Automatisierung im Heim eigentlich nichts weiter im Wege.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Und es wird Licht - Aber wo?</title>
      <link>https://blog.stefan-michaelis.name/iota/tastfeldbeschriftung/</link>
      <pubDate>Wed, 07 Mar 2018 19:36:29 +0100</pubDate>
      
      <guid>https://blog.stefan-michaelis.name/iota/tastfeldbeschriftung/</guid>
      <description>&lt;p&gt;Die Auswahl der Schalterserie im Haus ist eine Frage des persönlichen
Geschmacks. Unabhängig von der Auswahl der konkreten Serie müssen aber
gerade in komplizierten Installationen die Schalter auch entsprechend
ihrer Funktion beschriftet werden. Bei den KNX-Tastern der Serie F50
der Firma Jung kann dies bis zu acht verschiedene Funktionen in einem
Schalter bedeuten.&lt;/p&gt;

&lt;p&gt;Die Serie F50 besitzt zwischen den eigentlichen Tastern eine
transparente Fläche aus Kunststoff hinter der die Symbole für die
Funktionen angebracht werden können. Für die Erstellung der
Beschriftung bietet der Hersteller eine eigene Webanwendung an:
&lt;a href=&#34;http://lt.jung.de&#34;&gt;lt.jung.de&lt;/a&gt;. Bis auf kleinere Bugs funktioniert
diese recht gut und bietet eine ordentliche Auswahl an Symbolen. Die
fertige Beschriftung lässt sich als PDF für den Ausdruck
herunterladen. Leider hat sich dann gezeigt, dass die Symbole nicht
als Vektorgrafik im PDF integriert sind und daher deutlich sichtbare
Pixel zeigen. Bei genügend großem Abstand zum Schalter fällt dies im
Alltag vermutlich gar nicht auf, aber trotzdem:&lt;/p&gt;

&lt;p&gt;Zurück ans Reißbrett und in Inkscape selbst gezeichnet. Neben
Vektorgrafik hat dies auch erlaubt auf einfache Weise passende Symbole
selbst zu erstellen. Ein Ausschnitt ist hier zu sehen:&lt;/p&gt;

&lt;div class=&#34;row&#34;&gt;
     &lt;div class=&#34;col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1&#34;&gt;
     	  &lt;img src=&#34;https://blog.stefan-michaelis.name/images/Tastfelder_Beispiel.png&#34; class=&#34;img-responsive&#34; /&gt;
     &lt;/div&gt;
&lt;/div&gt;


&lt;p&gt;Wer Interesse daran hat findet hier die Vorlage zur eigenen Verfügung:
&lt;a href=&#34;images/Tastfeldbeschriftung.svg&#34;&gt;Tastfeldbeschriftung&lt;/a&gt;. Die Datei beinhaltet zwei Layer, einen mit der fertigen
Beschriftung (die Symbole dürften nicht für jeden Anwendungsfall geeignet sein,
bzw. ausreichen) und den unteren Layer mit leeren Vorlagen für die
zwei- und vierfach Tastfelder. Beim Druck ist zu beachten, dass in
manchen Fällen der Treiber die Seite etwas skaliert. Ein Testausdruck
auf Papier bevor es z.B. auf Folie geht wird empfohlen.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Wo kommen die Daten her?</title>
      <link>https://blog.stefan-michaelis.name/iota/verfuegbare-sensoren/</link>
      <pubDate>Wed, 21 Feb 2018 21:43:53 +0100</pubDate>
      
      <guid>https://blog.stefan-michaelis.name/iota/verfuegbare-sensoren/</guid>
      <description>&lt;p&gt;Um ein Haus intelligent werden zu lassen müssen auch passende Daten
vorliegen. Die Sensorik ist damit die Grundlage um überhaupt etwas
lernen zu können. Die grundlegende Installation in unserem Haus
basiert auf KNX. Dieses System vereint dezentral Komponenten aus
Aktorik und Sensorik auf einem Bus. Grundlagen dazu sind
bei &lt;a href=&#34;https://de.wikipedia.org/wiki/KNX-Standard&#34;&gt;Wikipedia&lt;/a&gt; zu finden,
prinzipiell spielt der genaue Standard aber keine Rolle solange
Sensordaten in verarbeitbarer Form verfügbar sind. Vorteile des
Systems sind die Offenheit des Standards, der auch eine langfristige
Verfügbarkeit garantiert, und die Robustheit der Gesamtinstallation
durch den Verzicht auf einen zentralen Server. Als verbreiteten
Industriestandard ist es kein Problem sowohl Installateure als auch
neue Hardware dafür zu finden.&lt;/p&gt;

&lt;p&gt;Die Installation in unserem Haus ist verhältnismäßig klein gehalten
und bietet die grundlegenden Funktionen für die Schaltung von Licht
und Regelung von Heizung und kontrollierter Wohnraumlüftung.&lt;/p&gt;

&lt;p&gt;Die verfügbare Sensorik besteht aus:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;18 x Temperatursensoren (einer davon Außentemperatur)&lt;/li&gt;
&lt;li&gt;4 x Feuchtesensoren&lt;/li&gt;
&lt;li&gt;2 x CO²-Sensoren&lt;/li&gt;
&lt;li&gt;3 x Helligkeitssensoren außen für die Himmelsrichtungen Ost/Süd/West&lt;/li&gt;
&lt;li&gt;2 x Leistungsaufnahme für Waschmaschine und Trockner&lt;/li&gt;
&lt;li&gt;6 x Präsenzdetektion&lt;/li&gt;
&lt;li&gt;1 x Windgeschwindigkeit&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Grundsätzlich ist keiner dieser Sensoren notwendig. Die
Fußbodenheizung ist über den hydraulischen Abgleich fest eingestellt
und könnte über die Vorlauftemperatur regeln, die Lüftungsanlage läuft
nach Zeitprogramm und die Lichtschalter schalten das Licht.&lt;/p&gt;

&lt;p&gt;Die erste simple Automatisierung betreffen dann die Einzelraumregelung
über die Temperatursensoren in jedem Raum und die automatische
Schaltung von Licht in den Durchgangsbereichen und den Fluren und
damit das Hello-World der Hausautomatisierung.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Internet of Things Automation und das lernende Smart Home</title>
      <link>https://blog.stefan-michaelis.name/iota/internet-of-things-automation/</link>
      <pubDate>Wed, 07 Feb 2018 20:56:11 +0100</pubDate>
      
      <guid>https://blog.stefan-michaelis.name/iota/internet-of-things-automation/</guid>
      <description>&lt;div class=&#34;row&#34;&gt;
     &lt;div class=&#34;col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-10 col-xs-offset-1&#34;&gt;
     	  &lt;img src=&#34;https://blog.stefan-michaelis.name/images/IntelligentHousePlain.png&#34; class=&#34;img-responsive&#34; /&gt;
     &lt;/div&gt;
&lt;/div&gt;


&lt;p&gt;Das Internet der Dinge ist überall, vor allem auch in der öffentlichen
Wahrnehmung. Gartner stuft IoT in seinem Hype-Cycle vom August 2016
kurz vor dem &lt;em&gt;Peak of inflated expectations&lt;/em&gt; ein. Die Ankunft im
Mainstream wäre danach noch 5 bis 10 Jahre entfernt.  Aber was ist das
Internet der Dinge wirklich? Im einfachsten Fall ist dies einfach ein
Gerät mit Internetanschluss. Der Kühlschrank, die Kaffeemaschine?
Wozu?  Sinn macht das Internet der Dinge eigentlich erst dann, wenn
die Geräte intelligenter und Aktionen automatisiert werden. Eine
gewisse Lernfähigkeit gehört dazu.  Eine Spielwiese für Ideen bietet
dabei das Smart Home. Steckdosen und Licht per App schalten? Kein
Problem. Das selbstlernende Haus? Sehen wir doch einmal.&lt;/p&gt;

&lt;p&gt;Ziele für intelligente Systeme im Haus sind dabei:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Einsparung von Energie&lt;/li&gt;
&lt;li&gt;Einsparung von Kosten&lt;/li&gt;
&lt;li&gt;Erhöhung des Komforts&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Die folgenden Beiträge beschreiben Schritt für Schritt Experimente und
Konzepte, wie kleine Geräte ihren Nutzen durch Automatisierung und
maschinelles Lernen erhöhen können.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Der Feind in meinem Haus</title>
      <link>https://blog.stefan-michaelis.name/iota/der-feind-in-meinem-haus/</link>
      <pubDate>Mon, 22 Jan 2018 19:07:55 +0100</pubDate>
      
      <guid>https://blog.stefan-michaelis.name/iota/der-feind-in-meinem-haus/</guid>
      <description>&lt;p&gt;Über seinen Internet-Provider zu schimpfen ist immer en vogue. Zu
langsam, bringt nicht die vereinbarte Geschwindigkeit und
überhaupt. Auch wenn schnelles Internet für uns ein Traum ist,
zumindest stabil sollte es sein. Und das ist es nicht. Seit gefühlt
schon ewig ist der DSL-Anschluss vom Verlust genau eben dieser
Außenanbindung geprägt. Nicht immer, aber so oft, dass es nervt. Und
ebenso scheinen die Störungen mehr zu werden, so dass teilweise
minutenlang keine Internetverbindung zustande kommt. Das Eventlog
zeigt keine Auffälligkeiten, nur Ping-Pong aus Aufbau und Verlust der
WAN-Verbindung.&lt;/p&gt;

&lt;p&gt;Schnell ist das auf Provider und/oder den billigen Standardrouter
geschoben. In diesem Fall Vodafone mit einer Easybox 804 (die in der
Bedienung gar keinen so schlechten Eindruck macht, das Wichtigste ist da).&lt;/p&gt;

&lt;p&gt;Bevor man allerdings direkt ein Ticket beim Provider aufmacht erst
einmal ausschließen, dass der Nutzer zu dumm ist. Also:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Kabel in eine andere Buchse der TAE-Einheit gesteckt. Vielleicht
sind die Kontakte korrodiert.&lt;/li&gt;
&lt;li&gt;Nach Routerupdates suchen (keine vorhanden).&lt;/li&gt;
&lt;li&gt;Router komplett zurücksetzen (natürlich vorher die Einstellungen
sichern, insbesondere die WLAN-Passwörter).
&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Dumm nur, wenn man sich beim letzteren für super organisiert hält, den
Ordner mit den Unterlagen aus dem Schrank zieht und &amp;hellip; &lt;em&gt;nach&lt;/em&gt;
Zurücksetzen feststellt, dass dort die Zugangsdaten nicht vorhanden
sind. Also, jetzt gar kein Internet mehr und keine Möglichkeit dieses
wieder in Betrieb zu nehmen. Sonntag Abend um 22.30 Uhr.&lt;/p&gt;

&lt;p&gt;Aber der Provider hat eine kostenlose 24/7-Hotline. Die Frage nach dem
Kundenpasswort löst zwar eher Fragezeichen bei mir im Kopf aus (ist
bestimmt bei den Zugangsdaten), aber durch Beantwortung diverser
anderer Fragen ist die Identität letztendlich geklärt. Problem
geschildert und neue Zugangsdaten per SMS innerhalb der nächsten 15
Minuten versprochen bekommen. Hat dann doch länger gedauert, aber am
nächsten Morgen waren sie da. Schnell eingegeben und alles geht
wieder. Über den Support lässt sich schon einmal nicht meckern. Die
Zugangsdaten habe ich dann übrigens in einer Email gefunden. Allein
aus Sicherheitsgründen hätte ich geschworen, die sind damals per
Briefpost gekommen.&lt;/p&gt;

&lt;p&gt;Am nächsten Abend die Ernüchterung, alles ist so stabil, oder eben
nicht, wie vorher. Der Plan: Ein Ticket beim Provider wegen defekten
Routers oder defekter Anbindung eröffnen lassen.&lt;/p&gt;

&lt;p&gt;Und dann beim Stöbern einen
&lt;a href=&#34;http://www.androidpolice.com/2018/01/14/google-home-max-appears-killing-wifi-networks/&#34;&gt;Bericht&lt;/a&gt;
gefunden in dem über den &lt;em&gt;Google Home Max&lt;/em&gt; und das massive Aussenden
von Multicastpaketen berichtet wird, die den Router zum Absturz
bringen können. Und anscheinend sind auch andere Cast-fähige Geräte
(Chromecast, Android-Smartphones) davon betroffen. Aus dem Gedächtnis
hätten sich die Probleme auch ungefähr zu dem Zeitpunkt verschlimmert
als der neueste Smartphone-Zuwachs ins Netz gekommen ist.&lt;/p&gt;

&lt;p&gt;Also nachschauen. Wireshark anwerfen und tatsächlich, da sind sie, die
gefürchteten mDNS-Pakete. Ca. 60% des gesamten Datenverkehrs. Und
gemessen lediglich kabelgebunden an einem normalen PC.&lt;/p&gt;

&lt;img src=&#34;https://blog.stefan-michaelis.name/images/pakettrace.png&#34; alt=&#34;/images/pakettrace.png&#34; class=&#34;img-responsive&#34;&gt;


&lt;p&gt;Im zeitlichen Verlauf gut zu erkennen ist die Spitze direkt nach dem
Einschalten des Smartphones für nur einige wenige Sekunden. Wer weiß, was
noch alles über die Luftschnittstelle gegangen ist und schon gar nicht
mehr weiter geleitet wurde. Eine Erklärung wäre dies auch, warum sich
das Smartphone direkt nach dem Aufwecken sehr zäh in der Bedienung
anfühlt. Wenn es doch erst einmal tausende Pakete versenden muss&amp;hellip;&lt;/p&gt;

&lt;img src=&#34;https://blog.stefan-michaelis.name/images/paketgraph.png&#34; alt=&#34;/images/paketgraph.png&#34; class=&#34;img-responsive&#34;&gt;


&lt;p&gt;Verursacher ist hier ein relativ altes Nexus 5 mit Android 6,
Marshmallow. Die meisten Berichte konzentrieren sich auf Geräte mit
Oreo, aber mindestens Nougat.&lt;/p&gt;

&lt;p&gt;Als erste Gegenmaßnahme die Chromecast vom Netz getrennt und die
Google Home-App, die für die Inbetriebnahme und Ansteuerung der
Chromecast zuständig ist, auf allen Smartphones
deinstalliert. Geholfen hat es nichts, die Pakete kommen trotzdem
weiter angeflogen. Entweder die Funktion ist tief im System verankert
oder die anderen Cast-fähigen Apps (Youtube&amp;hellip;) lösen das Problem auch
aus.&lt;/p&gt;

&lt;p&gt;Abhilfe schaffen soll ein &lt;a href=&#34;https://www.heise.de/newsticker/meldung/Bugfix-Google-behebt-Patzer-in-Chromecast-und-Google-Home-3946037.html&#34;&gt;Update der Google Play
Dienste&lt;/a&gt;. Mal
schauen, wann dieses überall eingetroffen ist. Den Fehler beheben soll
Version
&lt;a href=&#34;https://www.xda-developers.com/google-home-chromecast-connectivity-issues/&#34;&gt;11.9.74&lt;/a&gt;,
aktuell ist auf den Telefonen aber noch 11.9.51.&lt;/p&gt;

&lt;p&gt;Ob dies dann die Wurzel allen Übels war und sich die Situation bessert
bleibt abzuwarten. Auf ein Routerupdate zu hoffen, das besser mit
dieser ungewollten Denial-of-Service-Attacke im eigenen Netz umgeht,
dürfte länger dauern.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Update 04.02.2018&lt;/strong&gt;: Das war schon einmal nichts. Alle Updates sind
eingespielt (Version 11.9.75), die mDNS-Pakete auf ein Normalmaß
zurückgegangen und es gibt immer noch Verbindungsabbrüche. Also zurück
von vorne&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
